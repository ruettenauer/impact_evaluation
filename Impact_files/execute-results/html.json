{
  "hash": "dde97a8aa8995329f06fc475f13b7afd",
  "result": {
    "markdown": "---\ntitle: \"Impact evaluation using secondary data\"\nauthor:   \n  - Tobias Rüttenauer   \nformat:\n  revealjs: \n    theme: default\n    slide-number: true\n    chalkboard: \n      buttons: false\n    smaller: false\n    footer: <[Impact Evaluation](/index.html)>\ndate: \"2023-11-15\"\n---\n\n\n# Measuring Impact\n\n\\newcommand{\\Cov}{\\mathrm{Cov}}\n\\newcommand{\\Var}{\\mathrm{Var}}\n\\newcommand{\\tr}{\\mathrm{tr}}\n\\newcommand{\\plim}{\\operatornamewithlimits{plim}}\n\\newcommand{\\diag}{\\mathrm{diag}}\n\\newcommand{\\E}{\\mathrm{E}}\n\\newcommand{\\Prob}{\\mathrm{Prob}}\n\\newcommand{\\bm}[1]{\\boldsymbol{\\mathbf{#1}}}\n\n\n::: {.cell}\n\n:::\n\n\n\n## Some recommendations\n\n - [Econometrics](https://metricsf22.classes.ryansafner.com/) by Ryan Safner\n - [Program Evaluation](https://evalf22.classes.andrewheiss.com/) by Andrew Heiss\n - [Mastering Metrics](https://mru.org/mastering-econometrics-joshua-angrist) by @Angrist.2015\n - [The Effect](https://theeffectbook.net/) by @Huntington-Klein.2021\n \nTHis course frofitted a lot from the course materials by Safner and Heiss.\n\n<!-- ## Definition of Impact Evaluation -->\n\n<!-- -  **Impact Evaluation** is a systematic process that assesses the outcomes and impacts of a program, project, or policy intervention. -->\n<!-- -  It links **cause** and **effect** -->\n<!-- -  It aims to answer the question: \"What would have happened without the intervention?\" -->\n<!-- -  Provides evidence-based insights to improve decision-making and accountability. -->\n\n\n<!-- ## Objectives of Impact Evaluation -->\n\n<!-- ::: {.incremental} -->\n<!-- -  **Causality Assessment**: Determine the causal relationship between an intervention and observed outcomes. -->\n<!-- -  **Accountability**: Hold governments and organizations accountable for their programs and policies. -->\n<!-- -  **Learning and Improvement**: Identify what works and what doesn't, leading to program improvement. -->\n<!-- -  **Informed Decision-Making**: Provide policymakers with evidence to make informed decisions. -->\n<!-- ::: -->\n\n\n\n##\tObjectives of Impact Evaluation {.smaller}\n\n**Impact Evaluation** is a systematic process that assesses the outcomes and impacts of a program, project, or policy intervention.\n\n::: {.fragment fragment-index=1}\n### Typical questions\n:::\n\n::: {.incremental}\n-  Did the intervention make a difference?\n-  To what extent can a specific impact be attributed to the intervention?\n-  How has the intervention made a difference?\n-  Will the intervention work elsewhere?\n:::\n\n\n\n## Types of Impact Evaluation {.smaller}\n\nImpact evaluation can take various forms, depending on the context and objectives.\n\n. . .\n\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n### Qualitative\n\n-  Interviews\n-  Focus Groups\n-  Case Studies\n\n:::\n\n::: {.column width=\"50%\"}\n\n### Quantitative\n::: {.fragment .highlight-red}\n-  Causal model of impact using DAGS\n-  Randomized Controlled Trials (RCTs)\n-  Instrumental Variable (IV)\n-  Regression Discontinuity Design (RDD)\n-  Difference-in-Differences (DiD)\n:::\n:::\n\n\n::::\n\n\n# Defining a causal model\n\n<!-- ## Causal Chain of Impact {.smaller} -->\n\n<!-- - A causal chain outlines the sequence of events leading from a program or intervention to its desired impact. -->\n\n<!-- . . . -->\n\n<!-- ### Components of a Causal Chain -->\n\n<!-- ::: {.fragment fragment-index=1} -->\n<!-- 1. Inputs: Resources allocated to the program. -->\n<!-- 2. Activities: Actions taken as part of the program. -->\n<!-- 3. Outputs: Immediate products of program activities. -->\n<!-- 4. Outcomes: Short and medium-term changes in participants' knowledge, behavior, or conditions. -->\n<!-- 5. Impact: The long-term, intended effects on the target population or society. -->\n<!-- ::: -->\n\n<!-- ::: {.fragment fragment-index=2} -->\n<!-- Important for your design (measures, time, mechanisms) -->\n<!-- ::: -->\n\n\n\n\n\n<!-- ## Causal Chain of Impact {.smaller} -->\n\n<!-- - A causal chain outlines the sequence of events leading from a program or intervention to its desired impact. -->\n\n<!-- ### Example Causal Chain -->\n\n<!-- ::: {.incremental} -->\n<!-- 1.  Inputs: Funding, trainers, materials. -->\n<!-- 2.  Activities: Training sessions. -->\n<!-- 3.  Outputs: Number of participants trained. -->\n<!-- 4.  Outcomes: Improved skills and job search success. -->\n<!-- 5.  Impact: Increased employment and income. -->\n<!-- ::: -->\n\n\n\n\n\n## What IS Causation? {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\n- $X$ causes $Y$ if we can intervene and change $X$ without changing anything else, and $Y$ changes\n- $Y$ “listens to” $X$\n  - $X$ may not be the only thing that causes $Y$!\n\n:::\n::: {.column width=\"50%\"}\n![](figs/lightswitch.jpg)\n:::\n:::\n\n\n## What IS Causation? {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\n- $X$ causes $Y$ if we can intervene and change $X$ without changing anything else, and $Y$ changes\n- $Y$ “listens to” $X$\n  - $X$ may not be the only thing that causes $Y$!\n\n\n::: {.callout-tip appearance=\"simple\" icon=false}\n## Example\nIf $X$ is a light switch, and $Y$ is a light:\n\n- Flipping the switch $(X)$ causes the light to go on $(Y)$\n- But NOT if the light is burnt out (No $Y$ despite $X$)\n- OR if the light was already on $(Y$ without $X$)\n\n:::\n:::\n::: {.column width=\"50%\"}\n![](figs/lightswitch.jpg)\n:::\n:::\n\n\n\n\n\n\n\n## Directed Acyclical Graphs (DAGs) {.smaller}\n\n-  Directed Acyclic Graphs (DAGs) are a graphical representation of causal relationships in impact evaluation.\n-  Nodes are factors/variables.\n-  Directed arrows describe cause-effect relationships.\n-  No feedback loops allowed.\n\n. . .\n\n### Using DAGs in Impact Evaluation\n\n::: {.incremental}\n-  Clarify causal assumptions.\n-  Identify potential sources of bias.\n-  Guide the selection of variables for analysis.\n-  Visualize complex causal relationships.\n:::\n\n\n<!-- ## Directed Acyclical Graphs (DAGs) {.smaller} -->\n\n<!-- ![](figs/causalpaths-basiclook-1.png) -->\n\n<!-- See @Huntington-Klein.2021 and @Pearl.2019 for more. -->\n\n<!-- Online tool: [Dagitty](https://www.dagitty.net/) -->\n\n\n\n## Causal Diagrams/DAGs  {.smaller}\n::: columns\n::: {.column width=\"50%\"}\n- [Directed]{.hi}: Each node has arrows that points only one direction\n- [Acyclic]{.hi}: Arrows only have one direction, and cannot loop back\n- [Graph]{.hi}\n\n::: {.fragment fragment-index=1}\n- A visual model of the data-generating process, encodes our understanding of the causal relationships\n- Requires some common sense/economic intuition\n:::\n\n:::\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/unnamed-chunk-2-1.png){width=960}\n:::\n:::\n\n\n::: {.fragment fragment-index=2}\n- Remember, all models are wrong, we just need them to be *useful*!\n:::\n\n:::\n:::\n\n\n\n<!-- ## Causal Diagrams/DAGs  {.smaller} -->\n\n<!-- ::: columns -->\n<!-- ::: {.column width=\"50%\"} -->\n<!-- - A visual model of the data-generating process, encodes our understanding of the causal relationships -->\n\n<!-- - Requires some common sense/economic intuition -->\n\n<!-- - Remember, all models are wrong, we just need them to be *useful*! -->\n\n<!-- ::: -->\n<!-- ::: {.column width=\"50%\"} -->\n<!-- ```{r} -->\n<!-- dag -->\n<!-- ``` -->\n<!-- ::: -->\n<!-- ::: -->\n\n\n\n\n\n## Drawing a DAG  {.smaller}\n::: columns\n::: {.column width=\"50%\"}\n1. Consider all the variables likely to be important to the data-generating process (including variables we can't observe!)\n\n2. For simplicity, combine some similar ones together or prune those that aren't very important\n\n3. Consider which variables are likely to affect others, and draw arrows connecting them\n\n4. Test some testable implications of the model (to see if we have a correct one!)\n\n:::\n::: {.column width=\"50%\"}\n![](figs/causality.jpg){fig-align=\"center\" width=600}\n:::\n:::\n\n## Drawing a DAG  {.smaller}\n::: columns\n::: {.column width=\"50%\"}\n- Drawing an arrow requires a direction - making a statement about causality!\n\n- *Omitting* an arrow makes an equally important statement too!\n  - In fact, we will *need* omitted arrows to show causality!\n\n- If two variables are correlated, but neither causes the other, likely they are both caused by another (perhaps **unobserved**) variable - add it!\n\n- There should be no *cycles* or *loops* (if so, there’s probably another missing variable, such as time)\n\n:::\n::: {.column width=\"50%\"}\n![](figs/causality.jpg){fig-align=\"center\" width=600}\n:::\n:::\n\n\n## DAG Example I  {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.callout-tip appearance=\"simple\" icon=false}\n## Example\nwhat is the effect of education on wages?\n\n- Education $X$, “treatment” or “exposure”\n\n- Wages $Y$, “outcome” or “response”\n:::\n:::\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/unnamed-chunk-3-1.png){width=960}\n:::\n:::\n\n:::\n:::\n\n## DAG Example I {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\n\n- What other variables are important?\n  - Ability\n  - Socioeconomic status\n  - Demographics\n  - Gravity\n  - Year of birth\n  - Location\n  - Schooling laws\n  - Job network\n:::\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n:::\n:::\n\n## DAG Example I {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\n\n- In social science and complex systems, 1000s of variables could plausibly be in the DAG!\n\n- So simplify:\n  - Ignore trivial things (like gravity)\n  - Combine similar variables (Socioeconomic status, Demographics, Location) if not interesting per se $\\rightarrow$ Background\n:::\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/unnamed-chunk-5-1.png){width=960}\n:::\n:::\n\n:::\n:::\n\n\n\n## DAG Example II {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\n\n- Background, Year of birth, Location, Compulsory schooling, all cause education\n\n- Background, year of birth, location, job networks probably cause wages\n:::\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n:::\n:::\n\n## DAG Example II {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\n\n- Background, Year of birth, Location, Compulsory schooling, all cause education\n\n- Background, year of birth, location, job networks probably cause wages\n\n- Job networks in fact is probably caused by education!\n\n- Location and background probably both caused by unobserved factor (`u1`)\n:::\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n:::\n:::\n\n## DAG Example II {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\n\n- This is messy, but we have a causal model!\n\n- Makes our assumptions **explicit**, and many of them are **testable**\n\n- DAG suggests certain relationships that will *not* exist:\n  - all relationships between `laws` and `netw` go through `educ`\n  - so if we controlled for `educ`, then `cor(laws,netw)` should be zero!\n:::\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n:::\n:::\n\n\n## More on DAGS \n\nAbove exmaples came from: [Econometrics](https://metricsf22.classes.ryansafner.com/) by Ryan Safner\n\nDo it yourself: [Dagitty](https://www.dagitty.net/){target=\"_blank\"}\n\nA very nice read by the \"father of DAGs\": @Pearl.2019.\n\nSee also: [The Effect](https://theeffectbook.net/) by @Huntington-Klein.2021\n\n\n# Causal Treatment Effect\n\n## Potential outcomes, counterfactuals, and the road not taken {.smaller}\n\n![](figs/Metrics)\n\n## The potential outcome framework {.smaller}\n\n\n:::: {.columns}\n\n::: {.column width=\"60%\"}\n::: {style=\"font-size: 75%;\"}\n\n| Unit | Control | Treatment | Effect |\n|------|------|------|------|\n| $i$  | $Y_i^C$ | $Y_i^T$ | $\\delta_i$ |\n| 1   | 8   | 9   |  1  |\n| 2   | 5   | 3   | -2  |\n| 3   | 6   | 4   | -2  |\n| 4   | 6   | 2   | -4  |\n| 5   |15   | 18  |  3  |\n| 6   | 13  | 16  |  3  |\n| 7   |8   | 9   |  1  |\n| 8   | 2   | 0   | -2  |\n| 9   | 4   | 3   | -1  |\n| 10  | 2   | 0   | -2  | \n| Average |  6.9 | 6.4 | -0.5 |\n\n: Table 1\n\n:::\n:::\n\n::: {.column width=\"40%\"}\n\n$D = T$: Treatment \n\n$D = C$: Control \n\n$Y = Y^T$ if $D = T$ \n\n$Y = Y^C$ if $D = C$ \n\nAverage causal effect: \n\n$\\bar{\\delta} = 6.4 - 6.9 = -0.5$\n\n:::\n\n\n::::\n\n\n\n## Potential vs. observed outcomes {.smaller}\n\n\n:::: {.columns}\n\n::: {.column width=\"60%\"}\n::: {style=\"font-size: 75%;\"}\n\nUnit |\tControl | Treatment  | D | Observed |\n|------|------|------|------|------|\n$i$     | $Y_i^C$  | $Y_i^T$    |   | $Y_{obs}$ | \n1 \t    |\t<span style='color:red;'>?</span>\t  | 9\t| T |9 |\n2 \t    |\t5\t|<span style='color:red;'>?</span>\t    | C |5  |\n3 \t    |\t6\t|<span style='color:red;'>?</span>\t    | C |6  |\n4 \t    |\t6\t|<span style='color:red;'>?</span>\t    | C |6  |\n5 \t    | <span style='color:red;'>?</span>\t  |18\t| T |18 |\n6 \t    |\t<span style='color:red;'>?</span>\t  |16\t| T |16 |\n7 \t    |\t<span style='color:red;'>?</span>\t  |9\t| T |9  |\n8 \t    |\t2\t|<span style='color:red;'>?</span>\t    | C |2  |\n9 \t    |\t4\t|<span style='color:red;'>?</span>\t    | C |4  |\n10 \t    |\t2\t|<span style='color:red;'>?</span>\t    | C |2  |\nAverage | 4.2 |\t13              |   |   | \n\n: Table 2\n\n:::\n:::\n\n::: {.column width=\"40%\"}\n\nObserved effect: \n\n13 - 4.2 = 8.8 !!\n\t\nWrong conclusions: \n\n- Comparing the observed outcomes, we would assume a treatment effect of nearly 9...\n- Problem: even in the absence of treatment, those in the treatment group are different from those in the control group.\n\n:::\n\n\n::::\n\n\n## Fundamental Problem of Causal Inference {.smaller}\n\n\nFor subject $i$, the <span style='color:red;'>causal effect</span> of the treatment is the difference between two potential outcomes: \n\n-  $\\delta_i = Y_i^T - Y_i^C$ \n-  $Y_i^T$: $i$'s potential outcome in treatment \n-  $Y_i^C$: $i$'s potential outcome in control\n\nBut only one of the two potential outcomes is realized/observed!\n\nGroup             | $Y_i^T$ | $Y_i^C$ | \n|------|------|------|\nTreatment ($D=T$) | __Observable__ | <span style='color:red;'>Counterfactual</span> |\nControl ($D=C$)   | <span style='color:red;'>Counterfactual</span>     | __Observable__ | \n\n\n\n## The problem of confounding {.smaller}\n\n\nNaive comparison of treated vs untreated is often biased\n\n::: {.incremental}\n-  Individuals select themselves into a treatment group, causing a bias.\n-  Some unobserved characteristics causes treatment and outcome, making the observed relationship spurious.\n<!-- -  The characteristics of those in the sample are different from the characteristics of those not in the sample -->\n:::\n\n. . .\n\n:::: {.columns}\n\n::: {.column width=\"20%\"}\n:::\n\n::: {.column width=\"60%\"}\n\n![](figs/eduwage.png)\n\n:::\n\n::: {.column width=\"20%\"}\n:::\n\n::::\n\n\n<!-- ### Example -->\n\n<!-- -  __Healthy Immigrant Effect__: immigrants are on average healthier than native-born -->\n<!-- -  Is migration (X) causing better health (Y)?  -->\n\n<!-- . . . -->\n\n<!-- -  __Immigrant self-selection__: Migrants tend to be positively selected on ambition, education, health, wealth, etc: they are better off than those who do not migrate -->\n\n\n## The problem of confounding {.smaller}\n\n![John Snow and Cholera: [Youtube](https://www.youtube.com/watch?v=lNjrAXGRda4)](figs/snow.jpg){target=\"_blank\"}\n\n\n\n## Randomised Control Trials  {.smaller}\n\nA randomized control trial (RCT) / experimental design randomly assigns individuals to different levels of treatment.\n\nExample: a drug trial with individuals randomly assigned to either receiving the drug (treatment) or a placebo (control or untreated).\n\n. . .\n\n-  a simple assignment mechanism is to toss a coin.\n-  ideally the trial is a double-blind trial where neither the patient nor doctors know who received the drug and who received the placebo.\n-  The estimated treatment effect is simply the difference in means: $E(Y^T) - E(Y^C)$.\n\n. . .\n\n__Given that \"a coin-toss\" determines treatment__, we completely rule out\n\n- self-selection into treatment,\n- confounding due to unobserved factors.\n\n\n\n\n\n## The beauty of randomisation  {.smaller}\n\n:::: {.columns}\n\n::: {.column width=\"60%\"}\n\n![](figs/Random_dice.png)\n\n:::\n\n::: {.column width=\"40%\"}\n\nLaw of large numbers\n\n-  if we randomly assign treatment\n-  and $N$ is sufficiently large\n-  treatment and control group should be identical on average\n-  each group should have the same mean as the population\n-  that applies to all their characteristics (e.g. gender, age, motivation, political views...)\n\n:::\n\n::::\n\n\n\n## Randomised Control Trials  {.smaller}\n\n![](figs/eduwage2.png)\n\n\n\n## Pros and Cons of RCTs\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n### Pros\n\n-  Minimising bias\n-  Complete control\n-  Robust impact estimate\n-  \"Gold standard\"\n\n:::\n\n::: {.column width=\"50%\"}\n\n### Cons\n\n-  Often small sample size\n-  Sometimes low external validity\n-  Spillovers / Hawthorn effect\n-  Feasibility?\n\n:::\n\n::::\n\n\n## Example: Peer-group intervention {.smaller}\n\n### @Carrell.2013\n\n:::: {.columns}\n\n::: {.column width=\"60%\"}\n\n::: {.fragment fragment-index=1}\n-  United States Air Force Academy\n-  Students randomly assigned to peer groups\n-  Positive peer effect on academic performance\n\nNew experiment of policy instrument\n:::\n\n::: {.fragment fragment-index=2}\n-  Assignment to “optimally” designed peer groups\n:::\n::: {.fragment fragment-index=3}\n-  \"Optimal\" policy has **negative** effect on performance\n:::\n\n:::\n\n\n::: {.column width=\"40%\"}\n::: {.fragment fragment-index=2}\n![](figs/Carrell.png)\n:::\n:::\n::::\n\n::: {.fragment fragment-index=4}\n*\"These results illustrate how policies that manipulate peer groups for a desired social outcome can be confounded by changes in the endogenous patterns of social interactions within the group.\"*\n:::\n\n\n\n<!-- ## Example: Peer-group intervention  {.smaller} -->\n\n<!-- ### @Carrell.2013 -->\n\n<!-- ![](figs/Carrell.png) -->\n\n\n\n\n# Impact evaluation using secondary data\n\n## Impact evaluation using secondary data {.smaller}\n\n::: {.fragment fragment-index=1}\nIn impact evaluation (as in social sciences), we are interested in the **causal research questions**\n\n- we want to investigate questions of cause and effect.\n- RCTs provide a way to circumvent the problems of causal inference.\n:::\n::: {.fragment fragment-index=2}\n- However, randomly exposing some individuals to treatment and withholding treatment from others can be tricky (e.g. education, marriage).\n:::\n\n::: {.fragment fragment-index=3}\nA potential compromise: __Compare alike with alike__\n\n[The Effect](https://theeffectbook.net/) [@Huntington-Klein.2021] is a great online resource .\n:::\n\n\n# Instrumental Variables (IV)\n\n\n## IV: The problem {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/iv-dag-simple-1.png){fig-align='center' width=70%}\n:::\n:::\n\n\n\n$$\\color{#FF851B}{\\text{Earnings}_i} = \\beta_0 + \\beta_1 \\color{#0074D9}{\\text{Education}_i} + \\varepsilon_i$$\n\n::: {.fragment fragment-index=1}\nIf we ran this regression, would $\\beta_1$ give us the causal effect of education?\n:::\n\n\n::: {.fragment fragment-index=2}\n**No!**\n\n- Omitted variable bias!\n- Endogeneity!\n:::\n\n\n## IV: The problem {.smaller}\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n**Exogenous** variables\n\n- Value is not determined by anything else in the model\n- In a DAG, a node that doesn't have arrows coming into it\n\n**Endogenous** variables\n\n- Value is determined by something else in the model\n- In a DAG, a node that has arrows coming into it\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/iv-dag-endogenous-1.png){fig-align='center' width=100% height=100%}\n:::\n:::\n\n\n::: {.fragment fragment-index=1}\n::: {.callout-tip appearance=\"simple\" icon=false}\nParts of education is endogenous, parts of it is exogenous.\n\nCan we isolate the exogenous part?\n:::\n:::\n\n:::\n\n::::\n\n## What is an instrument? {.smaller}\n\n*\"Instead of randomizing the variable ourselves, we hope that something has already randomized it for us. We look in the real world for a source of randomization of our treatment\"* [@Huntington-Klein.2021]\n\n:::{.incremental}\n-  **Relevance**: Something that is correlated with the policy variable.\n-  **Exclusion**: Something that does not directly cause the outcome.\n-  **Exogeneity**: Something that is not correlated with the omitted variables.\n:::\n\n\n## What is an instrument? {.smaller}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/iv-dag-general-1.png){width=100%}\n:::\n:::\n\n\n\n## Example of instrument {.smaller}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/iv-dag-example-1.png){width=100%}\n:::\n:::\n\n\n\n<!-- ## Instrumental Variables & 2SLS {.smaller} -->\n\n<!-- - Now we know how to use instruments (when there is **1** [endogenous $X$ variable]{.red}, and **1** [instrumental variable $I$]{.blue}): -->\n<!--   1. Estimate reduced form (regress [outcome]{.green} `~` [instrument]{.blue}) -->\n<!--   2. Estimate first stage (regress [endog. variable]{.red} `~` [instrument]{.blue}) -->\n<!--   3. Calculate IV-estimate of [outcome]{.green} `~` [endog. variable]{.red} using (1) and (2) -->\n\n<!-- . . . -->\n\n<!-- - [Instrument]{.blue} isolates only the exogenous variation in the [endogenous variable]{.red} -->\n\n<!-- . . . -->\n\n<!-- - We can also use **multiple** endogenous variables and/or **multiple** instruments. -->\n\n\n\n## Intuitions from Instruments & 2SLS {.smaller}\n\n- The 2 stage least squares (2SLS) estimators for IVs:\n\n$$\n\\begin{align}\n  {\\color{#c5c5c5}{\\text{Endogenous model}}}& &\\color{green}{\\text{Outcome}_i} &= \\beta_0 + \\beta_1 \\color{red}{\\left( \\text{Endog. var.} \\right)_i} + u_i\\\\[0.5em]\n  {\\text{First stage}}& &\\color{red}{\\left( \\text{Endog. var.} \\right)_i} &= \\pi_0 + \\pi_1 \\color{blue}{\\text{Instrument}_i} + v_i\\\\[0.25em]\n  {\\text{Second stage}}& &\\color{green}{\\text{Outcome}_i} &= \\delta_0 + \\delta_1 \\color{red}{\\widehat{\\left( \\text{Endog. var.} \\right)}_i} + \\varepsilon_i\\\\[0.5em]\n  {\\color{#c5c5c5}{\\text{Reduced form}}}& &\\color{green}{\\text{Outcome}_i} &= \\pi_0 + \\pi_1 \\color{blue}{\\text{Instrument}_i} + w_i\\\\[0.25em]\n\\end{align}\n$$\n\nwhere $\\color{red}{\\widehat{\\left( \\text{Endog. var.} \\right)}_i}$ are the predicted values (*fitted values*) from the first-stage regression. They only contain the variance in $\\color{red}{\\left( \\text{Endog. var.} \\right)_i}$ that comes from $\\color{blue}{\\text{Instrument}_i}$.\n\n\n## Intuitions from Instruments & 2SLS {.smaller}\n\n- The 2 stage least squares (2SLS) estimators for IVs:\n\n$$\n\\begin{align}\n  {\\color{#c5c5c5}{\\text{Endogenous model}}}& &\\color{green}{\\text{Wage}_i} &= \\beta_0 + \\beta_1 \\color{red}{\\left( \\text{Education} \\right)_i} + u_i\\\\[0.5em]\n  {\\text{First stage}}& &\\color{red}{\\left( \\text{Education} \\right)_i} &= \\pi_0 + \\pi_1 \\color{blue}{\\text{Fathers Educ}_i} + v_i\\\\[0.25em]\n  {\\text{Second stage}}& &\\color{green}{\\text{Wage}_i} &= \\delta_0 + \\delta_1 \\color{red}{\\widehat{\\left( \\text{Education} \\right)}_i} + \\varepsilon_i\\\\[0.5em]\n  {\\color{#c5c5c5}{\\text{Reduced form}}}& &\\color{green}{\\text{Wage}_i} &= \\pi_0 + \\pi_1 \\color{blue}{\\text{Fathers Educ}_i} + w_i\\\\[0.25em]\n\\end{align} \n$$\n\nwhere $\\color{red}{\\widehat{\\left( \\text{Education} \\right)}_i}$ are the predicted values (*fitted values*) from the first-stage regression. They only contain the variance in $\\color{red}{\\left( \\text{Education} \\right)_i}$ that comes from $\\color{blue}{\\text{Fathers Educ}_i}$.\n\n## IV example: Family size and education {.smaller}\n\n### Child-quantity/child-qualitytrade-off [@Angrist.2010]\n\n- *How does family size affect education and economic situation of children?*\n    - Assumption A: Increase in family size reduces parental investment in each child\n    - Assumption B: Parents may compensate by additional \"investments\"\n- Problem: Family size depends on many other characteristics of the family\n\n\n::: {.fragment fragment-index=1}\nTwo possible instruments:\n\n- Twins: After first-born, family receives twins\n- Same-sex: First children having same sex increases preferences for additional\n\nSee also @Angrist.2015.\n:::\n\n## IV example: Family size and education {.smaller}\n\n### First stage: Instrument $\\rightarrow$ Family size\n\n![](figs/angrist1.png)\n\n## IV example: Family size and education {.smaller}\n\n### Second stage: Predicted Family size $\\rightarrow$ Educ\n\n![](figs/angrist2.png)\n\n\n## Examples of instruments {.smaller}\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Outcome </th>\n   <th style=\"text-align:left;\"> Policy </th>\n   <th style=\"text-align:left;\"> Unobserved stuff </th>\n   <th style=\"text-align:left;\"> Instrument </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Income </td>\n   <td style=\"text-align:left;\"> Education </td>\n   <td style=\"text-align:left;\"> Ability </td>\n   <td style=\"text-align:left;\"> Father's education </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Income </td>\n   <td style=\"text-align:left;\"> Education </td>\n   <td style=\"text-align:left;\"> Ability </td>\n   <td style=\"text-align:left;\"> Distance to college </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Income </td>\n   <td style=\"text-align:left;\"> Education </td>\n   <td style=\"text-align:left;\"> Ability </td>\n   <td style=\"text-align:left;\"> Military draft </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Health </td>\n   <td style=\"text-align:left;\"> Smoking cigarettes </td>\n   <td style=\"text-align:left;\"> Other negative health behaviors </td>\n   <td style=\"text-align:left;\"> Tobacco taxes </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Crime rate </td>\n   <td style=\"text-align:left;\"> Patrol hours </td>\n   <td style=\"text-align:left;\"> # of criminals </td>\n   <td style=\"text-align:left;\"> Election cycles </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Crime </td>\n   <td style=\"text-align:left;\"> Incarceration rate </td>\n   <td style=\"text-align:left;\"> Simultaneous causality </td>\n   <td style=\"text-align:left;\"> Overcrowding litigations </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Labor market success </td>\n   <td style=\"text-align:left;\"> Americanization </td>\n   <td style=\"text-align:left;\"> Ability </td>\n   <td style=\"text-align:left;\"> Scrabble score of name </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Conflicts </td>\n   <td style=\"text-align:left;\"> Economic growth </td>\n   <td style=\"text-align:left;\"> Simultaneous causality </td>\n   <td style=\"text-align:left;\"> Rainfall </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Instruments are hard to find! {.smaller}\n\n### $\\color{red}{\\text{Exlusion restriction}}$\n\n- Instrument causes the outcome *only through* the policy\n- For instance, rainfall is not a good instrument instrument [@Mellon.2020]\n\n::: {.fragment fragment-index=1}\n![](figs/Rainfall.png)\n:::\n\n\n# Regression Discontinuity Designs (RDD)\n\n## RDD: The idea {.smaller}\n\n*\"Whenever some treatment is assigned discontinuously - people just on one side of a line get it, and people just on the other side of the line don’t, might be a little different, but not that different.\"* [@Huntington-Klein.2021]\n\n### Quasi-experimental design\n\n::: {.fragment fragment-index=1}\n- Lots of policies and programs are based on arbitrary rules and thresholds.\n- If you're above the cutoff/threshold, you're in the program; if you're below, you're not (or vice versa).\n- Wether you are closely above or below the cutoff/threshold is **as good as random**.\n:::\n\nThe following graphs come from Andrew Heiss ([Program Evaluation](https://evalf22.classes.andrewheiss.com/)).\n\n\n## RDD: The idea {.smaller}\n\n### Random variation around cutoff\n\n:::{.incremental}\n- Running variable: continuous variable that determines whether you’re treated or not (e.g. score, time, distance).\n- Cutoff: The cutoff is the value of the running variable that determines whether you get treatment.\n- Bandwidth: It’s reasonable to think that people just barely to either side of the cutoff are basically the same other than for the cutoff.\n:::\n\n\n## RDD: Hypothetical example {.smaller}\n\nImagine: An entrance exam and those who score 70 or lower get additional training.\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/tutoring-running-threshold-1.png){width=100%}\n:::\n:::\n\n\n## RDD: Hypothetical example {.smaller}\n\nImagine: A entrance exam and those who score 70 or lower get additional training.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/tutoring-running-threshold-zoomed-1.png){width=100%}\n:::\n:::\n\n\n\n## RDD: Hypothetical example\n\nTo asses the effect of the additional training\n\n- we compare those above and below the treatment cutoff\n- within the specified bandwidth\n- and assume that they are nearly identical otherwise (as good as random)\n\nCalculate the difference between treatment and control. \n\n## RDD: Hypothetical example {.smaller}\n\nIn a regression framework:\n\n$$\ny_{i} = \\alpha + \\delta D_{i} + \\beta_1 [\\text{Running - Cutoff}]_{i} + \\beta_2 (D_{i} \\times [\\text{Running - Cutoff}]_{i}) + \\varepsilon{i},\n$$\n\n-  $D_{i}$: Whether an observation is in treatment group (above cutoff)\n-  $[\\text{Running - Cutoff}]_{t}$: running variable centered around the cutoff (positive after)\n-  $\\alpha + \\beta_1$ are intercept and slope for untreated (before cutoff)\n-  $(\\alpha + \\delta) + (\\beta_1 + \\beta_2)$ are intercept and slope for treated (after cutoff)\n-  $\\delta$ is the RDD treatment effect\n\n$[\\text{Running - Cutoff}]_{t}$ can be replace by any flexile function $f[\\text{Running - Cutoff}]_{t}$.\n\nSee @Huntington-Klein.2021.\n\n\n\n## RDD: Hypothetical estimate {.smaller}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/tutoring-outcome-1.png){width=100%}\n:::\n:::\n\n\n\n## RDD: Hypothetical estimate {.smaller}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/tutoring-outcome-lines-1.png){width=100%}\n:::\n:::\n\n\n\n## RDD: Hypothetical estimate {.smaller}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/tutoring-outcome-delta-1.png){width=100%}\n:::\n:::\n\n\n\n## RDD: Hypothetical estimate {.smaller}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/tutoring-outcome-delta-zoomed-1.png){width=100%}\n:::\n:::\n\n\n\n## RDD: There's no one right way\n\n- The size of the gap depends on how you draw the lines on each side of the cutoff\n- The type of lines you choose can change the estimate of $\\delta$ - sometimes by a lot!\n\n::: {.fragment fragment-index=1}\nThe researcher's degree of freedom\n:::\n\n::: {.fragment fragment-index=2}\n- Parametric vs. non-parametric lines\n- Bandwidths (common sense or algorithms?)\n- Kernels (weights by distance to cutoff?)\n:::\n\n::: {.fragment fragment-index=3}\n**It's important**: Lines should fit the data well!\n:::\n\n## RDD: Drawing lines\n\nCheck higher order polynomials!\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/params-plot-linear-poly-1.png){width=100%}\n:::\n:::\n\n\n\n## RDD: Drawing lines\n\nNon-parametric methods like LOESS (Locally estimated scatterplot smoothing)\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/params-plot-loess-1.png){width=100%}\n:::\n:::\n\n\n\n## RDD: Naturalisation & Political integration {.smaller}\n\n@Hainmueller.2015: \n\n- Switzerland, where some municipalities used referendums as the mechanism to decide naturalization requests\n\n![](figs/Hainmueller.png)\n\n## Heatwave exposure & pro-environmental behaviour\n\n@Ruttenauer.2023a\n\n![](figs/heat0.jpg)\n\n## Heatwave exposure & pro-environmental behaviour\n\n@Ruttenauer.2023a\n\n![](figs/heat1.jpg)\n\n\n## Paris terror attack and discrimination on AirBnB\n\n@Wagner.2019\n\n![](figs/wagner.png)\n\n\n\n# Difference-in-Differences (DiD) Methods\n\n## DiD: Problems  {.smaller}\n\n\n:::: columns\n\n::: {.column width=\"60%\"}\n\n::: {.fragment fragment-index=1}\nComparing only treatment/control\n\n- You're only looking at post-treatment values\n- Impossible to know if change happened because of natural growth\n:::\n\n\n::: {.fragment fragment-index=2}\nComparing only before/after\n\n- You're only looking at the treatment group!\n- Impossible to know if change happened because of treatment or just naturally\n:::\n:::\n\n\n::: {.column width=\"40%\"}\n\n::: {.fragment fragment-index=1}\n![](figs/heat0.jpg)\n:::\n\n::: {.fragment fragment-index=2}\n![](figs/heat1.jpg)\n:::\n\n:::\n::::\n\n## Simple DiD setup: Diff 1 {.smaller}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\">   </th>\n   <th style=\"text-align:center;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> Pre mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> Post mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> ∆ <span class=\"smaller\">(post − pre)</span> </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> Control </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>A</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>B</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #DDDDDD !important;\"> <b>B − A</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> Treatment </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>C</b><br><span class=\"small\">(not yet treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>D</b><br><span class=\"small\">(treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #DDDDDD !important;\"> <b>D − C</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> ∆<br><span class=\"smaller\">(treatment − control)</span> </td>\n   <td style=\"text-align:center;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <b>A − C</b> </td>\n   <td style=\"text-align:center;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <b>B − D</b> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <span class=\"\"><b>(B − A) − (D − C)</b></span> <i>or</i><br><span class=\"\"><b>(B − D) − (A − C)</b></span> </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n$\\Delta$ (post − pre) = **within-unit difference**\n\n\n## Simple DiD setup: Diff 2  {.smaller}\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\">   </th>\n   <th style=\"text-align:center;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> Pre mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> Post mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> <span class=\"color-light-5\">∆ <span class=\"smaller\">(post − pre)</span></span> </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> Control </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>A</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>B</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <b>B − A</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> Treatment </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>C</b><br><span class=\"small\">(not yet treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>D</b><br><span class=\"small\">(treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <b>D − C</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> ∆<br><span class=\"smaller\">(treatment − control)</span> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;\"> <b>C − A</b> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;\"> <b>D − B</b> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <span class=\"\"><b>(B − A) − (D − C)</b></span> <i>or</i><br><span class=\"\"><b>(B − D) − (A − C)</b></span> </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n$\\Delta$ (treatment − control) = **across-group difference**\n\n\n\n## Simple DiD setup: Diff in Diff {.smaller}\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\">   </th>\n   <th style=\"text-align:center;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> Pre mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> Post mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> ∆ <span class=\"smaller\">(post − pre)</span> </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> Control </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>A</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>B</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #DDDDDD !important;\"> <b>B − A</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> Treatment </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>C</b><br><span class=\"small\">(not yet treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>D</b><br><span class=\"small\">(treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #DDDDDD !important;\"> <b>D − C</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;font-weight: bold;color: #CF4446 !important;background-color: #FFC6C6 !important;\"> ∆<br><span class=\"smaller\">(treatment − control)</span> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;\"> <b>C − A</b> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;\"> <b>D − B</b> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;background-color: #DDDDDD !important;\"> <span class=\"color-5\"><b>(D − C) − (B − A)</b></span> <i>or</i><br><span class=\"color-5\"><b>(D − B) − (C − A)</b></span> </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n$\\Delta$ within units − $\\Delta$ within groups = **Difference-in-differences = causal effect**!\n\n\n## Simple DiD setup {.smaller}\n\n:::: columns\n\n::: {.column width=\"60%\"}\n![](figs/dd-diagram-1.png)\n:::\n\n::: {.column width=\"40%\"}\n\nImportant:\n\n::: {.fragment fragment-index=1}\n::: {.callout-tip appearance=\"simple\" icon=false}\n## Parallel trends assumption\n\n*\"In the absence of treatment, the treatment group would have had the same trend over time than the control group\"*\n:::\n:::\n\n::: {.fragment fragment-index=2}\n::: {.callout-tip appearance=\"simple\" icon=false}\n## No anticipation\n\n*\"The treatment only affects the treatment group from the treatment period onwards\"*\n:::\n:::\n\n:::\n\n::::\n\n\n\n\n## Simple DiD as regression {.smaller}\n\nThe 2 $\\times$ 2 Diff-in-Diff as an interaction term:\n\n$$\ny_{it} = \\alpha + \\gamma D_{i} + \\lambda Post_{t} + \\delta_{DD} (D_{i} \\times Post_{t}) + \\upsilon_{it},\n$$\n\n-  $D_{i}$: Whether an observation is in treatment group\n-  $Post_{t}$: Whether an observation is after treatment\n-  $D_{i} \\times Post_{t}$: Treatment group after treatment\n\n. . .\n\n$\\delta_{DD}$ gives the Diff-in-Diff estimator:\n\n$$\n\\hat{\\delta}_{DD} = \\E(\\Delta y_{T}) - \\E(\\Delta y_{C}) = [\\E(y_{T}^{post}) - \\E(y_{T}^{pre})] - [\\E(y_{C}^{post}) - \\E(y_{C}^{pre})].\n$$\n\n\n\n## Two-ways Fixed Effects{.smaller}\n\nIn settings with multiple periods, we rely on the two-ways FE estimator:\n\n$$\ny_{it} = \\beta_{TWFE} D_{it} + \\alpha_i + \\zeta_t + \\epsilon_{it}.\n$$\n\n. . .\n\nWith only two periods, a binary treatment, and all observations untreated in $t=1$, \n\n-  $\\hat{\\delta}_{DD} = \\hat{\\beta}_{TWFE}$,\n-  intuitively interpretable.\n\nWith multiple treatment groups and periods, it is a little bit more complicated. However, in an ideal setting, the FE estimator is a weighted average of many $2 \\times 2$ DiD estimators [@Goodman-Bacon.2021; @Roth.2023]\n\n## Monetary Intervention & Banking Panics\n\n@Richardson.2009\n\n![](figs/did1_2.jpg)\n\n## Monetary Intervention & Banking Panics\n\nParallel trends?\n\n![](figs/did2_2.jpg)\n\n\n## Two-ways FE with multiple treatment periods {.smaller}\n\n![Figure from @Goodman-Bacon.2021](figs/goodman.jpg)\n\n\n## Dynamic Treatment Effects {.smaller}\n\n::: {.fragment fragment-index=1}\nTreatment timing\n\n- Units often receive treatment at different times.\n:::\n\n::: {.fragment fragment-index=2}\nTreatment dynamic\n\n- Treatment effects unfold over time.\n:::\n\n::: {.fragment fragment-index=3}\nTreatment heterogeneity\n\n- Some (treatment) groups may have different treatment effects than others.\n:::\n\n::: {.fragment fragment-index=4}\nThis can (in some cases) be an issue for your estimate [@Goodman-Bacon.2020].\n\nSeveral new \"dynamic\" DiD estimators explicitly address the issue [@Roth.2023].\n:::\n\n\n## Event Study Design\n\n![](figs/Impact-function.png)\n\n## Dynamic Diff-in-Diff {.smaller}\n\n-  generalizes this $2 \\times 2$ Diff-in-Diff to a multi-group and multi-timing setting by computing group-time average treatment effects\n-  for each treatment-group $g$ and time period $t$\n\n\n$$\n\\delta_{g,t} = \\E(\\Delta y_{g}) - \\E(\\Delta y_{C}) = [\\E(y_{g}^{t}) - \\E(y_{g}^{g-1})] - [\\E(y_{C}^{t}) - \\E(y_{C}^{g-1})],\n$$\n\nwhere the control group can either be the never-treated or the not-yet-treated.\n\n. . .\n\nSummary measure / average  [@Callaway.2020]:\n\n$$\n  \\theta_D(e) := \\sum_{g=1}^G \\mathbf{1} \\{ g + e \\leq T \\} \\delta(g,g+e) P(G=g | G+e \\leq T),\n$$\n\nwhere $e$ specifies for how long a unit has been exposed to the treatment.\n\n\n## Dynamic Diff-in-Diff {.smaller}\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/figures-side-1.png){width=960}\n:::\n\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/figures-side-2.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](Impact_files/figure-revealjs/figures-side2-1.png){width=960}\n:::\n:::\n\n:::\n\n::::\n\n\n## Industrial plant openings & resident's income {.smaller}\n\n@Ruttenauer.2021b\n\n![](figs/Envir_sorting.PNG)\n\n\n## Life course events & Happiness{.smaller}\n\n@Clark.2013\n\n![](figs/lifecourse-events.PNG)\n\n\n\n## Synthetic Control {.smaller}\n\n@Mills.2022\n\n![](figs/Vaccinations_Synthetic_France.png)\n\n\n## References\n",
    "supporting": [
      "Impact_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ],
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}